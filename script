-- FE SELF FLING REAL
-- press N to fling yourself and M to go back

local Config = {
    FlingHotkey = "N",
    TpBackHotkey = "M",
    Permanent = true
}

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:FindFirstChildWhichIsA("Humanoid")
local RootPart = Character:WaitForChild("HumanoidRootPart")

-- Corrige as teclas para mai√∫sculas
for key, value in next, Config do
    if type(value) == "string" then
        Config[key] = value:upper()
    end
end

local CurrentPos
local Connection

Connection = UserInputService.InputBegan:Connect(function(input, typing)
    if typing then return end

    -- FLING
    if input.KeyCode == Enum.KeyCode[Config.FlingHotkey] then
        if Config.Permanent then
            if RootPart.Velocity.Magnitude <= 20 then
                CurrentPos = RootPart.CFrame
            end
            RootPart.Velocity = (RootPart.Velocity + Vector3.new(100, 100, 0)) + (RootPart.CFrame.LookVector * 100)
            RootPart.RotVelocity = RootPart.RotVelocity + Vector3.new(
                math.random(200, 300),
                math.random(-200, 300),
                math.random(200, 300)
            )
        else
            if RootPart.Velocity.Magnitude <= 20 then
                CurrentPos = RootPart.CFrame
            end
            RootPart.Velocity = (RootPart.Velocity + Vector3.new(20, 80, 0)) + (RootPart.CFrame.LookVector * 100)
            RootPart.RotVelocity = RootPart.RotVelocity + Vector3.new(
                math.random(200, 300),
                math.random(-200, 300),
                math.random(200, 300)
            )
        end

    -- TP BACK
    elseif input.KeyCode == Enum.KeyCode[Config.TpBackHotkey] then
        if CurrentPos then
            if RootPart.Velocity.Magnitude >= 20 then
                RootPart.Velocity = Vector3.new()
                RootPart.RotVelocity = Vector3.new()
                RootPart.CFrame = CurrentPos
                Humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
            end
        end
    end
end)

if not Config.Permanent then
    Humanoid.Died:Connect(function()
        Connection:Disconnect()
    end)
end
